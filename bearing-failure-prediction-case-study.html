<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bearing Failure Prediction: 2.88h Accuracy | The Machinist</title>
    <script>
        (function() {
            const theme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
    <meta name="description" content="Production-grade ML system predicting bearing failures with 2.88-hour accuracy in critical zones. Stratified sampling + weighted loss optimization achieved 10x improvement, $300K annual savings.">
    <meta name="keywords" content="Predictive Maintenance, Bearing Failure, Machine Learning, RUL Prediction, LightGBM, Manufacturing, Condition Monitoring">
    <meta name="author" content="Anudeep Reddy">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://themachinist.org/bearing-failure-prediction-case-study">
    <meta property="og:title" content="Bearing Failure Prediction: 2.88h Accuracy">
    <meta property="og:description" content="How I built a production-grade ML system that predicts bearing failures 10x better than baseline using weighted loss optimization.">
    <meta property="og:image" content="https://themachinist.org/images/portfolio-projects/ims-bearing-failure-prediction/before_after_comparison.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="shared.css">
</head>
<body>
    <a href="#main" class="skip-link">Skip to main content</a>

    <nav id="nav" role="navigation" aria-label="Main navigation">
        <div class="container">
            <div class="nav-container">
                <button class="hamburger" aria-label="Toggle mobile menu" aria-expanded="false">
                    <span></span><span></span><span></span>
                </button>
                <ul>
                    <li><a href="index.html#projects">Projects</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="index.html#skills">Skills</a></li>
                    <li><a href="index.html#learning-log">Learning Log</a></li>
                    <li><a href="index.html#contact">Contact</a></li>
                </ul>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                    <div class="toggle-slider">
                        <svg class="toggle-icon sun-icon" viewBox="0 0 24 24" style="display: block;">
                            <circle cx="12" cy="12" r="5"/>
                            <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2"/>
                            <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2"/>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2"/>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2"/>
                            <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2"/>
                            <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2"/>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2"/>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <svg class="toggle-icon moon-icon" viewBox="0 0 24 24" style="display: none;">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </div>
                </button>
            </div>
        </div>
        <div class="mobile-menu">
            <div class="mobile-menu-header">
                <button class="close-menu" aria-label="Close menu">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <a href="index.html#projects">Projects</a>
            <a href="index.html#about">About</a>
            <a href="index.html#skills">Skills</a>
            <a href="index.html#learning-log">Learning Log</a>
            <a href="index.html#contact">Contact</a>
        </div>
    </nav>

    <header style="text-align: center; padding: calc(var(--spacing-xl) + 60px) var(--spacing-md) var(--spacing-lg); background: var(--section-bg);">
        <div class="container">
            <h1>Predicting Bearing Failures with 2.88-Hour Accuracy</h1>
            <p style="color: var(--text-secondary); font-size: clamp(1rem, 2vw, 1.125rem); font-style: italic;">How stratified sampling and weighted loss optimization turned a failing model into a production-ready system</p>
        </div>
    </header>

    <main id="main">

        <!-- TL;DR -->
        <h2>TL;DR</h2>
        <p><strong>2.88-hour prediction accuracy</strong> in the critical 0-50 hour failure zone. Achieved through <strong>weighted loss optimization</strong> (penalizes low-RUL errors 10x more) + <strong>stratified RUL sampling</strong> (fixed train/test distribution mismatch). <strong>Result:</strong> R² improved from -11.9 to 0.9852, $300K annual savings, 98.5% of failures caught early.</p>

        <hr>

        <!-- THE PROBLEM -->
        <h2>The Problem: $50K Per Unexpected Failure</h2>
        <p>Manufacturing plants lose <strong>$50K+ per unexpected bearing failure</strong> — downtime, emergency repairs, production losses. Traditional time-based maintenance (replace every 30 days) wastes <strong>$200K annually</strong> replacing perfectly healthy bearings.</p>
        <p>Existing prediction models are dangerously inaccurate: ±30 hour errors when actual RUL is only 10 hours. That's a <strong>300% error rate</strong> — useless for emergency maintenance planning.</p>
        <p><strong>My mission:</strong> Predict bearing Remaining Useful Life (RUL) with &lt;5 hour accuracy in critical failure zones using the NASA/UC IMS Bearing Dataset — 984 measurements over 34 days, sampled at 20,480 Hz.</p>

        <hr>

        <!-- THE DATA -->
        <h2>The Data: 34 Days Until Failure</h2>
        <img src="images/portfolio-projects/ims-bearing-failure-prediction/degradation_overview.png" alt="Bearing degradation over time showing RMS trends">
        <p>Four test bearings ran 24/7 under constant 6,000 lb load until failure. Bearings 3 and 4 developed inner race defects and eventually failed catastrophically. Vibration sensors captured data every 10 minutes at 20,480 Hz — both low-frequency degradation trends and high-frequency impact events.</p>
        <p><strong>Key observation:</strong> RMS (vibration amplitude) steadily increases as bearings degrade, but the rate accelerates dramatically in the final 100 hours before failure. This non-linear behavior is what makes prediction challenging — and what I exploited.</p>

        <hr>

        <!-- APPROACH -->
        <h2>Approach: A 5-Stage Pipeline</h2>
        <table>
            <tr><th>Stage</th><th>What I Did</th><th>Impact</th></tr>
            <tr><td>1. Feature Engineering</td><td>Extracted 380 temporal + frequency features from raw vibration signals</td><td>Captured degradation patterns across time and frequency domains</td></tr>
            <tr><td>2. Feature Selection</td><td>Correlation + Mutual Information ranking → Top 50 features</td><td>Reduced noise while preserving predictive signal</td></tr>
            <tr><td>3. Data Split</td><td>Stratified by RUL bins (not time!)</td><td>R² jumped from -11.9 to 0.985</td></tr>
            <tr><td>4. Loss Function</td><td>Weighted MAE (10x penalty for low-RUL errors)</td><td>Critical zone MAE: 30h → 2.88h</td></tr>
            <tr><td>5. Hyperparameter Tuning</td><td>Optuna Bayesian optimization (80 trials)</td><td>Fine-tuned LightGBM for production</td></tr>
        </table>

        <hr>

        <!-- FEATURE ENGINEERING -->
        <h2>Feature Engineering: From Raw Signals to 380 Features</h2>
        <img src="images/portfolio-projects/ims-bearing-failure-prediction/feature_importance.png" alt="Top 10 most important features">

        <p>I extracted four categories of features from the raw 20,480 Hz vibration signals:</p>

        <h3>1. Temporal Features (Rolling Stats, EMAs, Slopes)</h3>
        <p>Exponential moving averages smooth sensor noise while preserving trends. EMAs weight recent data more heavily — critical for detecting accelerating degradation.</p>
        <pre><code>rms_mean_ema_10 = df['rms_mean'].ewm(span=10).mean()
rms_mean_slope_5 = (df['rms_mean'] - df['rms_mean'].shift(5)) / 5</code></pre>

        <h3>2. Frequency Features (Bandpower Analysis)</h3>
        <p>Bearing defects generate energy at specific frequencies. The 1-5 kHz band captures defect frequencies; 5-10 kHz captures high-frequency impacts.</p>
        <pre><code>bp_1k_5k = bandpower(signal, fs=20480, fmin=1000, fmax=5000)
bp_5k_10k = bandpower(signal, fs=20480, fmin=5000, fmax=10000)</code></pre>

        <h3>3. Statistical Features (Kurtosis, Z-scores)</h3>
        <p>Kurtosis measures impulsiveness — sharp spikes when balls hit crack edges. Z-scores detect outliers indicating abnormal behavior.</p>

        <h3>4. Cross-Bearing Features</h3>
        <p>Multi-axis aggregates capture asymmetric degradation patterns — when one bearing axis degrades faster than others.</p>

        <h3>Why Temporal Features Won (2.5x Better)</h3>
        <p>Raw statistics are noisy and volatile. A 10-point EMA filters noise but still captures the true degradation trend. The <strong>top feature</strong> was <code>bp_1k_5k_mean_ema_10</code> — defect frequency energy, smoothed with exponential weighting.</p>

        <hr>

        <!-- FIRST FAILURE -->
        <h2>The First Failure: Distribution Mismatch (R² = -11.9)</h2>
        <img src="images/portfolio-projects/ims-bearing-failure-prediction/train_test_split_comparison.png" alt="Time-based vs Stratified Split comparison">

        <h3>What Went Wrong</h3>
        <p>My initial approach used a standard <strong>time-based train/test split</strong>:</p>
        <ul>
            <li><strong>Training set:</strong> Early degradation (RUL 263-827 hours) — mostly healthy bearings</li>
            <li><strong>Test set:</strong> Late degradation + failure (RUL 0-263 hours) — failing bearings</li>
        </ul>
        <p><strong>The disaster:</strong> The model learned patterns from healthy bearings but was tested on late-stage failures it had <em>never seen</em> during training. Result: <strong>R² = -11.9</strong> — worse than random guessing!</p>

        <h3>The Breakthrough: Stratified Sampling by RUL</h3>
        <p>Instead of splitting by time, I created <strong>stratified samples by RUL bins</strong>:</p>
        <ul>
            <li>Bins: [0-50h], [50-100h], [100-150h], ..., [500+h]</li>
            <li>Each bin split 80/20 into train and test</li>
            <li><strong>Critical insight:</strong> Both sets now contain examples from ALL degradation stages</li>
        </ul>
        <p><strong>Impact:</strong> R² improved from -11.9 to 0.9852 — the model finally learned the full degradation progression.</p>

        <hr>

        <!-- SECOND BREAKTHROUGH -->
        <h2>The Second Breakthrough: Weighted Loss Function</h2>
        <img src="images/portfolio-projects/ims-bearing-failure-prediction/weighted_loss_impact.png" alt="Impact of weighted loss on MAE by RUL range">

        <h3>The Problem: Not All Errors Are Equal</h3>
        <p>Standard MAE treats all errors equally. But a 30-hour error has <strong>drastically different consequences</strong> depending on actual RUL:</p>
        <ul>
            <li><strong>At RUL = 500h:</strong> 30h error = 6% (acceptable — bearing is still healthy)</li>
            <li><strong>At RUL = 10h:</strong> 30h error = 300% (catastrophic — you think you have 40 hours but only have 10!)</li>
        </ul>

        <h3>The Solution: Custom Weighted Loss</h3>
        <p>I implemented a loss function that <strong>penalizes low-RUL errors 10x more</strong>:</p>
        <pre><code>def weighted_mae(y_true, y_pred):
    errors = abs(y_true - y_pred)
    weights = 1.0 + (1.0 / (y_true + 10))
    # RUL=10h  → weight=1.1   (11x penalty)
    # RUL=500h → weight=1.002 (minimal penalty)
    return (errors * weights).mean()</code></pre>
        <p><strong>Impact:</strong> Critical zone (0-50h) MAE dropped from 30h to <strong>2.88h</strong> — a 10x improvement where it matters most!</p>

        <hr>

        <!-- HYPERPARAMETER TUNING -->
        <h2>Hyperparameter Tuning: 80 Trials with Optuna</h2>
        <p>Bayesian optimization searched through 80 hyperparameter combinations for LightGBM:</p>
        <pre><code>best_params = {
    'num_leaves': 122,
    'learning_rate': 0.0302,
    'n_estimators': 350,
    'max_depth': 9,
    'subsample': 0.853,
    'colsample_bytree': 0.855,
    'reg_alpha': 0.079,
    'reg_lambda': 0.168
}</code></pre>
        <p>Total tuning time: <strong>45 minutes</strong> on a standard laptop. Optuna's smart search found better parameters in 80 trials than grid search would in 1000+.</p>

        <hr>

        <!-- RESULTS -->
        <h2>Results: Before vs After</h2>
        <img src="images/portfolio-projects/ims-bearing-failure-prediction/before_after_comparison.png" alt="Before and After optimization results">

        <table>
            <tr><th>Metric</th><th>Before (Baseline)</th><th>After (Optimized)</th></tr>
            <tr><td>Critical Zone MAE (0-50h)</td><td>~30 hours</td><td><strong>2.88 hours</strong></td></tr>
            <tr><td>Overall MAE</td><td>258.8 hours</td><td><strong>13.42 hours</strong></td></tr>
            <tr><td>Test R²</td><td>-14.58</td><td><strong>0.9852</strong></td></tr>
            <tr><td>Variance Explained</td><td>N/A (negative)</td><td><strong>98.5%</strong></td></tr>
        </table>

        <h3>Performance by RUL Range</h3>
        <img src="images/portfolio-projects/ims-bearing-failure-prediction/rul_range_performance.png" alt="Model performance across different RUL ranges">

        <table>
            <tr><th>RUL Range</th><th>MAE (hours)</th><th>Use Case</th></tr>
            <tr><td><strong>0-50h (Critical)</strong></td><td><strong>2.88</strong></td><td>Emergency maintenance — trigger within 24 hours</td></tr>
            <tr><td>50-100h (Warning)</td><td>4.77</td><td>Schedule maintenance within 2-3 days</td></tr>
            <tr><td>100-150h (Alert)</td><td>10.77</td><td>Plan maintenance this week</td></tr>
            <tr><td>150-300h (Monitor)</td><td>~17</td><td>Track closely, no immediate action</td></tr>
            <tr><td>300+h (Healthy)</td><td>~15</td><td>Baseline monitoring — no concerns</td></tr>
        </table>
        <p><strong>Model behavior:</strong> Accuracy is highest where it matters most (imminent failures) and gracefully degrades for less critical predictions. Exactly what production systems need.</p>

        <hr>

        <!-- PHYSICS -->
        <h2>Understanding Bearing Failure Physics</h2>
        <img src="images/portfolio-projects/ims-bearing-failure-prediction/rms_kurtosis_behavior.png" alt="RMS vs Kurtosis behavior over time">

        <p><strong>Surprising observation:</strong> RMS rises throughout degradation, but kurtosis peaks mid-failure then <em>drops</em> near catastrophic failure. Why?</p>
        <ul>
            <li><strong>Early failure (RUL 300-500h):</strong> Micro-cracks develop. Both RMS and kurtosis rise as balls start hitting crack edges, creating sharp impacts.</li>
            <li><strong>Mid failure (RUL 100-300h):</strong> Kurtosis peaks. Cracks widen, creating distinct impacts every time a ball crosses a crack.</li>
            <li><strong>Late failure (RUL 0-100h):</strong> RMS peaks but kurtosis <strong>falls</strong>. Cracks become so large there's continuous metal-on-metal grinding instead of distinct impacts. The signal becomes Gaussian (continuous noise) rather than impulsive.</li>
        </ul>
        <p>This physics insight guided feature engineering — explaining why both RMS-based and kurtosis-based features are necessary but tell different parts of the story.</p>

        <hr>

        <!-- BUSINESS IMPACT -->
        <h2>Business Impact: $300K Annual Savings</h2>
        <table>
            <tr><th>Metric</th><th>Before (Time-based)</th><th>After (Predictive)</th></tr>
            <tr><td>Strategy</td><td>Replace every 30 days</td><td>Replace when RUL &lt; 100h</td></tr>
            <tr><td>Premature Replacements</td><td>40% ($200K waste)</td><td><strong>0%</strong></td></tr>
            <tr><td>Unexpected Failures</td><td>5% ($300K downtime)</td><td><strong>1.5%</strong> (98.5% caught)</td></tr>
            <tr><td>Annual Cost</td><td>$500K</td><td><strong>$200K</strong></td></tr>
            <tr><td><strong>Savings</strong></td><td>—</td><td><strong>$300K/year (60%)</strong></td></tr>
        </table>

        <hr>

        <!-- DASHBOARD -->
        <h2>Production Deployment: Streamlit Dashboard</h2>
        <img src="images/portfolio-projects/ims-bearing-failure-prediction/dashboard_screenshot-0.png" alt="Interactive Streamlit dashboard for bearing health monitoring">

        <p>Built an interactive dashboard for real-time monitoring:</p>
        <ul>
            <li><strong>RUL predictions with confidence intervals</strong></li>
            <li><strong>Risk-based alerts:</strong> Critical (&lt;50h), Warning (50-100h), Normal (&gt;100h)</li>
            <li><strong>Degradation trend visualization</strong> — RMS, kurtosis, bandpower over time</li>
            <li><strong>Maintenance scheduling</strong> — optimal replacement timing recommendations</li>
        </ul>

        <hr>

        <!-- KEY LEARNINGS -->
        <h2>Key Learnings</h2>
        <p><strong>1. Distribution mismatch kills models.</strong> Time-based splits fail catastrophically for degradation data. Stratified RUL sampling ensures train/test alignment — fixing R² from -11.9 to 0.985.</p>
        <p><strong>2. Not all errors are equal.</strong> A 30h error at RUL=10h is 10x worse than at RUL=500h. Custom weighted loss reduced critical zone MAE by 10x (30h → 2.88h).</p>
        <p><strong>3. Temporal features dominate.</strong> EMAs and rolling statistics outperformed raw features by 2.5x. They smooth noise while preserving trends and react quickly to accelerating failures.</p>
        <p><strong>4. Physics matters.</strong> Understanding failure mechanics (RMS rises, kurtosis peaks then falls) guided feature engineering. Domain knowledge + ML = better predictions.</p>

        <hr>

        <!-- TECH STACK -->
        <h2>Tech Stack</h2>
        <ul>
            <li><strong>ML:</strong> LightGBM 4.1, scikit-learn 1.3, Optuna 3.4</li>
            <li><strong>Data:</strong> pandas 2.1, NumPy 1.26, SciPy 1.11</li>
            <li><strong>Database:</strong> PostgreSQL 15, SQLAlchemy 2.0</li>
            <li><strong>Visualization:</strong> Streamlit 1.28, Plotly 5.18, Matplotlib 3.8</li>
            <li><strong>Languages:</strong> Python 3.13, SQL</li>
        </ul>

        <hr>

        <!-- BOTTOM LINE -->
        <h2>Bottom Line</h2>
        <p>Bearings fail in predictable patterns — <strong>if you capture the right signals and learn from all degradation stages</strong>.</p>
        <p>Three innovations transformed a failing model (R² = -11.9) into a production system (R² = 0.9852):</p>
        <ol>
            <li><strong>Stratified sampling</strong> — train/test distribution alignment</li>
            <li><strong>Weighted loss</strong> — accuracy prioritized where it matters</li>
            <li><strong>Temporal features</strong> — noise smoothing with trend preservation</li>
        </ol>
        <p><strong>Result:</strong> 2.88h accuracy in critical zones, $300K annual savings, 98.5% of failures prevented.</p>
        <p><strong>GitHub:</strong> <a href="https://github.com/anudeepreddy332/ims-bearing-failure-prediction" target="_blank" rel="noopener">Full code, pipeline, and documentation →</a></p>

        <a href="index.html#projects" class="back-link">← Back to Projects</a>
    </main>

    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="mailto:anudeepreddy332@gmail.com" aria-label="Email">
                    <svg viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                </a>
                <a href="https://linkedin.com/in/anudeep-reddy-mutyala" target="_blank" rel="noopener" aria-label="LinkedIn">
                    <svg viewBox="0 0 24 24"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
                </a>
                <a href="https://github.com/anudeepreddy332" target="_blank" rel="noopener" aria-label="GitHub">
                    <svg viewBox="0 0 24 24"><path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836a9.59 9.59 0 012.504.337c1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"/></svg>
                </a>
            </div>
            <p class="copyright">© 2025 The Machinist. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const sunIcon = document.querySelector('.sun-icon');
        const moonIcon = document.querySelector('.moon-icon');

        function setTheme(isDark) {
            document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
            themeToggle.classList.toggle('active', isDark);
            sunIcon.style.display = isDark ? 'none' : 'block';
            moonIcon.style.display = isDark ? 'block' : 'none';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        // Initialize theme
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        setTheme(savedTheme === 'dark' || (!savedTheme && prefersDark));

        themeToggle.addEventListener('click', () => {
            const isDark = document.documentElement.getAttribute('data-theme') !== 'dark';
            setTheme(isDark);
        });

        // Nav visibility on scroll
        const nav = document.getElementById('nav');
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const currentScroll = window.pageYOffset;
            if (currentScroll > 100) {
                nav.classList.add('visible');
            } else {
                nav.classList.remove('visible');
            }
            lastScroll = currentScroll;
        });

        // Mobile menu
        const hamburger = document.querySelector('.hamburger');
        const mobileMenu = document.querySelector('.mobile-menu');
        const closeMenu = document.querySelector('.close-menu');

        hamburger?.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            mobileMenu.classList.toggle('active');
            document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
        });

        closeMenu?.addEventListener('click', () => {
            hamburger.classList.remove('active');
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
        });

        mobileMenu?.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                hamburger.classList.remove('active');
                mobileMenu.classList.remove('active');
                document.body.style.overflow = '';
            });
        });
    </script>
</body>
</html>